(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b9d45b8"],{"542a":function(e,t,a){"use strict";a("fa98")},"56c3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex"},[a("Loading",{attrs:{active:e.isLoading,"is-full-page":e.fullPage},on:{"update:active":function(t){e.isLoading=t}},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}}),a("SideNavBarDC",{on:{"after-create-tweet":e.updateTweetCard}}),a("div",{staticClass:"reply-container w-100"},[a("header",{staticClass:"d-flex align-items-center"},[a("router-link",{staticClass:"leftArrow",attrs:{to:"/main"}},[a("i",{staticClass:"fas fa-arrow-left"})]),a("h3",{staticClass:"font-bold"},[e._v("推文")])],1),a("section",{staticClass:"main-tweet"},[a("div",{staticClass:"tweet-header d-flex"},[a("router-link",{attrs:{to:"/user/"+e.tweet.UserId}},[a("img",{staticClass:"content-img rounded",attrs:{src:e._f("emptyImage")(e.tweet.avatar),alt:""}})]),a("div",{staticClass:"content-user d-flex flex-column justify-content-center"},[a("span",{staticClass:"tweet-userName"},[e._v(e._s(e.tweet.name))]),a("span",{staticClass:"tweet-userInfo"},[e._v("@"+e._s(e.tweet.account))])])],1),a("div",{staticClass:"reply-content-container"},[a("p",[e._v(" "+e._s(e.tweet.description)+" ")]),a("div",{staticClass:"reply-contentTime-container"},[a("span",{staticClass:"reply-contentTime"},[e._v(e._s(e._f("customizeDate")(e.tweet.createdAt)))])]),a("div",{staticClass:"reply-userResponse d-flex"},[a("div",{staticClass:"comments"},[a("span",[e._v(e._s(e.tweet.repliedCount))]),e._v(" 回覆 ")]),a("div",{staticClass:"likes"},[a("span",[e._v(e._s(e.tweet.likedCount))]),e._v(" 喜歡次數 ")])]),a("div",{staticClass:"reply-userIcons-container"},[a("a",{staticClass:"reply-userIcon",attrs:{href:"","data-bs-toggle":"modal","data-bs-target":"#repliedModal"}},[a("font-awesome-icon",{staticClass:"mr-3",attrs:{icon:["far","comment"]}})],1),e.tweet.isLike?a("span",{staticClass:"reply-userIcon pink",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteLikes(e.tweet)}}},[a("font-awesome-icon",{staticClass:"mr-3",attrs:{icon:["fas","heart"]}})],1):a("span",{staticClass:"reply-userIcon",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addLikes(e.tweet)}}},[a("font-awesome-icon",{staticClass:"mr-3",attrs:{icon:["far","heart"]}})],1)])])]),a("ReplyListCard",{attrs:{"is-reply-page":e.isReplyPage,"init-replies":e.replies,"current-user":e.currentUser}}),a("RepliedModal",{attrs:{"init-tweet":e.tweet,"current-user":e.currentUser},on:{"after-create-comment":e.updateTweet}})],1),a("FollowingsCardDC",{attrs:{"init-top-users":e.topUsers,"current-user":e.currentUser}})],1)},r=[],n=a("5530"),i=a("1da1"),c=(a("b0c0"),a("96cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"tweets"},e._l(e.replies,(function(t,s){return a("li",{key:s,staticClass:"tweet d-flex"},[a("router-link",{staticClass:"tweet-img-container",attrs:{to:"/user/"+t.UserId}},[a("img",{staticClass:"tweet-img rounded",attrs:{src:e._f("emptyImage")(t.avatar),alt:""}})]),a("div",{staticClass:"tweet-content-container d-flex flex-column w-100"},[a("div",{staticClass:"tweet-header d-flex"},[a("router-link",{staticClass:"tweet-userName",attrs:{to:"/user/"+t.UserId}},[e._v(e._s(t.name))]),a("span",{staticClass:"tweet-userInfo"},[e._v("@"+e._s(t.commentAccount)+"・"+e._s(e._f("fromNow")(t.createdAt)))])],1),a("span",{staticClass:"tweet-replyFormat"},[e._v(" 回覆 "),a("router-link",{staticClass:"reply-name",attrs:{to:"/user/"+t.UserId}},[e._v("@"+e._s(t.tweetAuthorAccount))])],1),a("p",{staticClass:"tweet-content"},[e._v(" "+e._s(t.comment)+" ")])])],1)})),0)])}),o=[],l=a("2909"),u=a("2708"),d=a("2f62"),p={name:"MainTweetsCard",mixins:[u["b"],u["c"]],props:{isReplyPage:{type:Boolean,required:!0},initReplies:{type:Array,required:!0}},data:function(){return{modalOpen:!1,replies:this.initReplies}},watch:{initReplies:function(e){this.replies=Object(l["a"])(e)}},computed:Object(n["a"])({},Object(d["b"])(["currentUser","isAuthenticated"]))},f=p,m=a("2877"),w=Object(m["a"])(f,c,o,!1,null,"133d4f80",null),v=w.exports,g=a("0262"),C=a("a736"),h=a("e9c7"),k=a("6783"),L=a("2fa3"),_=a("9062"),b=a.n(_),x=(a("e40d"),{name:"ReplyList",mixins:[u["b"],u["a"]],components:{ReplyListCard:v,RepliedModal:g["a"],FollowingsCardDC:C["a"],SideNavBarDC:h["a"],Loading:b.a},data:function(){return{isReplyPage:!0,tweet:{},replies:[],isLoading:!1,fullPage:!0}},beforeRouteUpdate:function(e,t,a){this.getTweet(e.params.id),this.getRepies(e.params.id),a()},methods:{getRepies:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,k["a"].getRepies(e);case 4:s=a.sent,r=s.data,t.replies=r,t.isLoading=!1,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),t.isLoading=!1,L["a"].fire({icon:"error",title:a.t0});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},getTweet:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,k["a"].getReplyTweet(e);case 4:s=a.sent,r=s.data,t.tweet=r,t.isLoading=!1,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),t.isLoading=!1,L["a"].fire({icon:"error",title:a.t0});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},addLikes:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,k["a"].addLike(e.id);case 4:if(s=a.sent,r=s.data,"success"===r.status){a.next=8;break}throw new Error(r.message);case 8:e.isLike=!e.isLike,e.likedCount+=1,t.isLoading=!1,a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),t.isLoading=!1,L["a"].fire({icon:"error",title:"無法喜愛這則推文，請稍後再試"});case 17:case"end":return a.stop()}}),a,null,[[0,13]])})))()},deleteLikes:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,k["a"].deleteLike(e.id);case 4:if(s=a.sent,r=s.data,"success"===r.status){a.next=8;break}throw new Error(r.message);case 8:e.isLike=!e.isLike,e.likedCount-=1,t.isLoading=!1,a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](0),t.isLoading=!1,L["a"].fire({icon:"error",title:"無法取消喜愛這則推文，請稍後再試"});case 17:case"end":return a.stop()}}),a,null,[[0,13]])})))()},updateTweet:function(e){console.log(e);var t={avatar:this.currentUser.avatar,comment:e.content,commentAccount:this.currentUser.account,createdAt:e.curTime,name:this.currentUser.name,tweetAuthorAccount:this.tweet.account};this.tweet.repliedCount+=1,this.replies.unshift(t)},updateTweetCard:function(){}},created:function(){var e=this.$route.params.id;this.getRepies(e),this.getTweet(e)},computed:Object(n["a"])({},Object(d["b"])(["currentUser","isAuthenticated","topUsers"]))}),y=x,R=(a("542a"),Object(m["a"])(y,s,r,!1,null,"0c320398",null));t["default"]=R.exports},fa98:function(e,t,a){}}]);
//# sourceMappingURL=chunk-4b9d45b8.d86bacdc.js.map