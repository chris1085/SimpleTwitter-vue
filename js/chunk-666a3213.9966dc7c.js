(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-666a3213"],{"0d81":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"d-flex"},[o("SideNavBarDC",{on:{"after-create-tweet":e.updateTweetCard}}),o("div",{staticClass:"userFollower-container w-100"},[o("header",{},[o("div",{staticClass:"d-flex align-items-center"},[o("router-link",{staticClass:"leftArrow",attrs:{to:"/user/"+e.user.id}},[o("i",{staticClass:"fas fa-arrow-left"})]),o("div",{staticClass:"header-title"},[o("h3",{staticClass:"font-bold"},[e._v(e._s(e.user.name))]),o("span",{staticClass:"subInfo"},[e._v(e._s(e.user.tweetCount)+"推文")])])],1)]),o("ul",{staticClass:"followMenu d-flex"},[o("li",{staticClass:"followMenu-item",class:{followActive:"UserFollowers"===e.selected},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.fetchFollowed("UserFollowers",e.user.id)}}},[e._v(" 跟隨者 ")]),o("li",{staticClass:"followMenu-item",class:{followActive:"UserFollowings"===e.selected},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.fetchFollowed("UserFollowings",e.user.id)}}},[e._v(" 正在跟隨 ")])]),o("UserFollowCard",{attrs:{"init-follows":e.follows},on:{"after-click-follow":e.updateFollowStatus}})],1),o("FollowingsCardDC",{attrs:{"init-top-users":e.topUsers},on:{"after-delete-following":e.updateFollowing,"after-add-follower":e.updateFollower}})],1)},n=[],s=o("5530"),l=o("1da1"),a=(o("96cf"),o("b0c0"),o("4de4"),o("159b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.follows.length>0?o("ul",{staticClass:"follows w-100"},e._l(e.follows,(function(t,r){return o("li",{key:r,staticClass:"follow d-flex"},[o("div",{staticClass:"follow-img-container"},[o("img",{staticClass:"follow-img rounded",attrs:{src:e._f("emptyImage")(t.avatar),alt:""}})]),o("div",{staticClass:"follow-content-container d-flex flex-column"},[o("div",{staticClass:"follow-header"},[o("span",{staticClass:"follow-userName"},[e._v(e._s(t.name))])]),o("span",{staticClass:"follow-userId"},[e._v("@"+e._s(t.account))]),o("p",{staticClass:"follow-intro"},[e._v(" "+e._s(t.introduction)+" ")]),o("div",{staticClass:"btn-container"},[t.isFollowed&&t.followerId!==e.currentUser.id&&t.followingId!==e.currentUser.id?o("button",{staticClass:"btn btn-primary btn-follow",attrs:{type:"button"},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.deleteFollowing(t)}}},[e._v(" 正在跟隨 ")]):e._e(),t.isFollowed||t.followerId===e.currentUser.id||t.followingId===e.currentUser.id?e._e():o("button",{staticClass:"btn btn-outline-primary btn-follow",attrs:{type:"button"},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.addFollowing(t)}}},[e._v(" 跟隨 ")])])])])})),0):e._e(),0===e.follows.length?o("h3",{staticClass:"text-center mt-3"},[e._v(" 目前沒有跟蹤名單喔！ ")]):e._e()])}),i=[],c=o("4cce"),u=o("2fa3"),d=o("2708"),w=o("2f62"),f={props:{initFollows:{type:Array,required:!0}},mixins:[d["b"],d["a"]],watch:{initFollows:function(e){this.follows=e}},data:function(){return{follows:[]}},methods:{addFollowing:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var r,n,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,r="undefined"!==typeof e.followerId?e.followerId:e.followingId,o.next=4,c["a"].addFollowing({userId:r});case 4:if(n=o.sent,s=n.data,"success"===s.status){o.next=8;break}throw new Error(s.message);case 8:e.isFollowed=!0,t.$emit("after-click-follow",{id:r,isFollowed:!0}),o.next=15;break;case 12:o.prev=12,o.t0=o["catch"](0),u["a"].fire({icon:"error",title:"無法追隨，請稍後再試"});case 15:case"end":return o.stop()}}),o,null,[[0,12]])})))()},deleteFollowing:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var r,n,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,r="undefined"!==typeof e.followerId?e.followerId:e.followingId,o.next=4,c["a"].deleteFollowing({userId:r});case 4:if(n=o.sent,s=n.data,"success"===s.status){o.next=8;break}throw new Error(s.message);case 8:e.isFollowed=!1,t.$emit("after-click-follow",{id:r,isFollowed:!1}),o.next=15;break;case 12:o.prev=12,o.t0=o["catch"](0),u["a"].fire({icon:"error",title:"無法追蹤，請稍後再試"});case 15:case"end":return o.stop()}}),o,null,[[0,12]])})))()}},computed:Object(s["a"])({},Object(w["b"])(["currentUser","isAuthenticated"]))},p=f,v=o("2877"),h=Object(v["a"])(p,a,i,!1,null,null,null),m=h.exports,g=o("a736"),F=o("e9c7"),C={name:"UserFollowers",mixins:[d["b"],d["a"]],components:{UserFollowCard:m,FollowingsCardDC:g["a"],SideNavBarDC:F["a"]},data:function(){return{selected:"followers",user:{id:-1,account:"",avatar:"",cover:"",followerCount:1,followingCount:0,introduction:"",isFollowed:!1,name:"",tweetCount:0},follows:[]}},beforeRouteUpdate:function(e,t,o){this.getUser(e.params.id),this.fetchFollowed(this.followType,e.params.id),this.selected="UserFollowers",o()},methods:{getUser:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var r,n,s,l,a,i,d,w,f,p,v,h;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,c["a"].get(e);case 3:r=o.sent,n=r.data,s=n.id,l=n.account,a=n.avatar,i=n.cover,d=n.followerCount,w=n.followingCount,f=n.introduction,p=n.isFollowed,v=n.name,h=n.tweetCount,t.user={id:s,account:l,avatar:a,cover:i,followerCount:d,followingCount:w,introduction:f,isFollowed:p,name:v,tweetCount:h},o.next=12;break;case 9:o.prev=9,o.t0=o["catch"](0),u["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 12:case"end":return o.stop()}}),o,null,[[0,9]])})))()},fetchFollowed:function(e,t){var o=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var n,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,o.selected=e,n="UserFollowings"===e?"getFollowings":"getFollowers",r.next=5,c["a"][n](t);case 5:s=r.sent,l=s.data,o.follows=l.message?[]:l,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),u["a"].fire({icon:"error",title:"無法取得跟隨資料，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},updateFollowing:function(e){var t=this,o=this.$route.params.id,r=parseInt(o);r===this.currentUser.id&&"UserFollowings"===this.selected&&(this.follows=this.follows.filter((function(t){return t.followingId!==e}))),r===e&&"UserFollowers"===this.selected&&(this.follows=this.follows.filter((function(e){return e.followerId!==t.currentUser.id})))},updateFollower:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var r,n,s,l,a,i,d,w,f;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,r=t.$route.params.id,n=parseInt(r),n===e&&"UserFollowers"===t.selected&&t.follows.push({followerId:t.currentUser.id,account:t.currentUser.account,avatar:t.currentUser.avatar,name:t.currentUser.name,introduction:t.currentUser.introduction,isFollowed:!0}),n!==t.currentUser.id||"UserFollowings"!==t.selected){o.next=13;break}return o.next=7,c["a"].get(e);case 7:if(s=o.sent,l=s.data,"success"===l.status){o.next=11;break}throw new Error(l.message);case 11:a=l.id,i=l.account,d=l.avatar,w=l.introduction,f=l.name,t.follows.push({followingId:a,account:i,avatar:d,name:f,introduction:w,isFollowed:!0});case 13:o.next=18;break;case 15:o.prev=15,o.t0=o["catch"](0),u["a"].fire({icon:"error",title:"無法加入喜愛使用者，請稍後再試"});case 18:case"end":return o.stop()}}),o,null,[[0,15]])})))()},updateFollowStatus:function(e){var t=e.id,o=e.isFollowed;this.topUsers.forEach((function(e){e.id===t&&(e.isFollowed=o)}))},updateTweetCard:function(){}},created:function(){var e=this.$route.name,t=this.$route.params.id;this.selected=e,this.fetchFollowed(e,t),this.getUser(t)},computed:Object(s["a"])({},Object(w["b"])(["currentUser","isAuthenticated","topUsers"]))},b=C,U=(o("3183"),Object(v["a"])(b,r,n,!1,null,"a2ea9870",null));t["default"]=U.exports},3183:function(e,t,o){"use strict";o("489e")},"489e":function(e,t,o){}}]);
//# sourceMappingURL=chunk-666a3213.9966dc7c.js.map